<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riuhin - Beranda</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f2f2;
        margin: 0;
        padding: 0;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #1e90ff;
        color: white;
        padding: 10px 15px;
        font-size: 18px;
        position: sticky;
        top: 0;
    }
    header a {
        color: white;
        text-decoration: none;
        font-weight: bold;
    }
    .container {
        max-width: 600px;
        margin: auto;
        padding: 15px;
    }
    .post-form {
        background: white;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    textarea {
        width: 100%;
        padding: 8px;
        resize: none;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 14px;
        margin-bottom: 8px;
    }
    button {
        padding: 6px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    .btn-post {
        background: #1e90ff;
        color: white;
    }
    .post {
        background: white;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .username {
        font-weight: bold;
        color: #1e90ff;
        cursor: pointer;
    }
    .actions {
        display: flex;
        gap: 8px;
        margin-top: 5px;
    }
    .btn-follow {
        background: #1e90ff;
        color: white;
    }
    .btn-followed {
        background: gray;
        color: white;
    }
    .btn-like {
        background: transparent;
        color: red;
        font-size: 16px;
    }
</style>
</head>
<body>

<header>
    <div>RIUHIN</div>
    <a href="profil.html">Profil</a>
</header>

<div class="container">
    <!-- Form buat posting -->
    <div class="post-form">
        <textarea id="postText" rows="3" placeholder="Apa yang sedang terjadi?"></textarea>
        <button class="btn-post" onclick="buatPost()">Posting</button>
    </div>

    <!-- Timeline postingan -->
    <div id="timeline"></div>
</div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let follows = JSON.parse(localStorage.getItem("follows")) || [];
let likes = JSON.parse(localStorage.getItem("likes")) || {};

function renderPosts() {
    let timeline = document.getElementById("timeline");
    timeline.innerHTML = "";

    posts.forEach((post, index) => {
        let isFollowed = follows.includes(post.username);
        let isLiked = likes[index] || false;

        let postEl = document.createElement("div");
        postEl.className = "post";
        postEl.innerHTML = `
            <div class="post-header">
                <span class="username" onclick="alert('Buka profil: ${post.username}')">${post.username}</span>
            </div>
            <p>${post.text}</p>
            <div class="actions">
                <button class="${isFollowed ? 'btn-followed' : 'btn-follow'}" onclick="toggleFollow('${post.username}')">
                    ${isFollowed ? 'Followed' : 'Follow'}
                </button>
                <button class="btn-like" onclick="toggleLike(${index})">
                    ${isLiked ? '‚ù§Ô∏è' : 'ü§ç'} ${post.likes}
                </button>
            </div>
        `;
        timeline.appendChild(postEl);
    });
}

function buatPost() {
    let text = document.getElementById("postText").value.trim();
    if (text === "") {
        alert("Postingan tidak boleh kosong!");
        return;
    }

    let username = localStorage.getItem("userUsername") || "User"; // default kalau belum login
    let newPost = { username: username, text: text, likes: 0 };

    posts.unshift(newPost);
    localStorage.setItem("posts", JSON.stringify(posts));
    document.getElementById("postText").value = "";
    renderPosts();
}

function toggleFollow(username) {
    if (follows.includes(username)) {
        follows = follows.filter(u => u !== username);
    } else {
        follows.push(username);
    }
    localStorage.setItem("follows", JSON.stringify(follows));
    renderPosts();
}

function toggleLike(index) {
    likes[index] = !likes[index];
    posts[index].likes += likes[index] ? 1 : -1;
    localStorage.setItem("likes", JSON.stringify(likes));
    localStorage.setItem("posts", JSON.stringify(posts));
    renderPosts();
}

renderPosts();
</script>

</body>
</html>